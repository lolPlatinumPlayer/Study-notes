

# ç»¼åˆ

### è®°å½•

- webpack3 å’Œ babelå€’è…¾äº†åŠå¤©è¿˜æ˜¯æ— æ³•è§£æes6è¯­æ³•â€”â€”2020.4.17



# [npm](https://docs.npmjs.com/cli/v6/commands)



### [å…¨å±€é…ç½®](https://docs.npmjs.com/cli/v6/commands/npm-config)

- å•é¡¹è®¾ç½®ä¸æŸ¥çœ‹  
  å¯ä»¥é€šè¿‡`npm config setå’Œget`è¿›è¡Œè®¾ç½®ä¸æŸ¥çœ‹
  
- å¤šé¡¹è®¾ç½®ä¸æŸ¥çœ‹
  - æ–¹æ³•ä¸€  
    é€šè¿‡[`npm config list`](https://docs.npmjs.com/cli/v6/commands/npm-config#list)æŸ¥çœ‹  
    <span style='opacity: 0.5'>ï¼ˆ`npm config ls`æ˜¯åˆ«åï¼Œè¿™ä¸ªå®˜ç½‘æ²¡æåˆ°ï¼‰</span>  
    <span style='opacity: 0.5'>
  
  - æ–¹æ³•äºŒ  
    é€šè¿‡[`.npmrc`æ–‡ä»¶](https://docs.npmjs.com/cli/v6/configuring-npm/npmrc)è®¾ç½®ä¸æŸ¥çœ‹  
    - æŸ¥çœ‹`.npmrc`æ–‡ä»¶åœ°å€çš„æ–¹æ³•  
      [`npm config list`](https://docs.npmjs.com/cli/v6/commands/npm-config#list)å°±æœ‰åˆ—å‡º`.npmrc`æ–‡ä»¶çš„åœ°å€

**å…·ä½“å¯é…ç½®å†…å®¹**

- å…¨å±€ä¾èµ–çš„å®‰è£…ä½ç½®
  - æŸ¥çœ‹  
    `npm config get prefix`
  - ä¿®æ”¹  
    `npm config set prefix 'æ–°åœ°å€'`
  - è¿˜åŸ  
    å»`.npmrc`æ–‡ä»¶åˆ æ‰å¯¹åº”é…ç½®å°±è¡Œ


### ä¸‹è½½æº

æ“ä½œ

- æŸ¥çœ‹ï¼š`npm config get registry`
- ä¿®æ”¹ï¼š`npm config set registry éœ€è¦çš„ä¸‹è½½æº`
- è®¾ç½®åŒä¸‹è½½æºï¼š  
  æŒ‰æ­å…´çš„è¯´æ³•ï¼Œå…ˆè®¾ç½®`.npmrc`ç„¶åä¸€éƒ¨åˆ†å°±ä¼šä»`.npmrc`é‡Œèµ°  
  å¦ä¸€éƒ¨åˆ†ä»`npm config get registry`é‡Œèµ°

ä¸‹è½½æº

- å®˜æ–¹åŸç‰ˆä¸‹è½½æºï¼š`http://registry.npmjs.org/`æˆ–`https://registry.npmjs.org/`
- æ·˜å®é•œåƒä¸‹è½½æºï¼š`https://registry.npm.taobao.org`

ç»éªŒ

- å¡ä½  
  ç»ˆç«¯å¡åœ¨`fetchMetadata: still resolveWithNewModule åé¢å†…å®¹çœç•¥`  
  ç­‰ä¸€ä¸ªå°æ—¶éƒ½æ²¡å˜åŒ–  
  - è§£å†³åŠæ³•  
    [è¿™ä¸ªæ–‡ç« ](https://blog.csdn.net/jagger_guo/article/details/102884480)çš„è¯„è®ºé‡Œå°±æœ‰å¾ˆå¤šäººé‡åˆ°è¿™ä¸ªæƒ…å†µï¼Œè¯´åˆ‡æ¢æ·˜å®æºå³å¯  
    ä¸ªäººåœ¨ä¸€å¤©ç½‘ç»œä¸å¤ªå¥½çš„æ—¶å€™è¿›è¡Œå®æ“ä»ç„¶ä¸è¡Œ  
    å¡åœ¨å¦‚ä¸‹æŠ¥é”™ï¼š  
    ![getaddrinfo ENOTFOUND](https://img.wenhairu.com/images/2021/08/01/9h6yT.md.png)  
    ç­‰ä¸€ä¸ªå°æ—¶ä¹Ÿä¸å¥½ä½¿  
    åœ¨ç¬¬äºŒå¤©æ—©ä¸Šæ²¡äººç”¨ç½‘ç»œæ—¶è¿›è¡Œå°è¯•å³å¯æ­£å¸¸å®‰è£…

### åˆå§‹åŒ–

å¦‚æœä¸åˆå§‹åŒ–çš„è¯åç»­å®‰è£…ä¾èµ–ä¿¡æ¯éƒ½ä¸ä¼šæ·»åŠ åˆ°`package.json`é‡Œ  
ï¼ˆä¸è¿‡å®‰è£…ç¬¬ä¸€ä¸ªä¾èµ–å`package-lock.json`ä¾æ—§ä¼šç”Ÿæˆï¼‰  
è€Œä¸”å®‰è£…æŸäº›ä¾èµ–çš„æ—¶å€™ä¼šè¦æ±‚å…ˆæœ‰`package.json`  
<span style='opacity: 0.5'>ï¼ˆæœªäº†è§£åˆå§‹åŒ–é™¤äº†æ–°å»º`package.json`å¤–è¿˜åšäº†ä»€ä¹ˆï¼‰</span>

- æŒ‰é»˜è®¤è¦æ±‚åˆå§‹åŒ–  
  `npm init -y`  



### package.json

- ç‰ˆæœ¬è¯­ä¹‰  
  - [åŸºæœ¬è¯´æ˜](https://docs.npmjs.com/about-semantic-versioning#using-semantic-versioning-to-specify-update-types-your-package-can-accept)
  - è¯¦ç»†è¯´æ˜è§[ä¾èµ–ç‰ˆæœ¬å¤§å…¨](https://semver.npmjs.com/)çš„æœ€ä¸‹æ–¹
- package.jsonä¸åŒ…å«çš„ä¾èµ–ï¼šåæœŸç”¨ä¸å¸¦--saveçš„å‘½ä»¤å®‰è£…çš„ä¾èµ–





### [å®‰è£…ä¾èµ–](https://docs.npmjs.com/cli/v6/commands/npm-install)

`npm install <name>`å°†ä¾èµ–è£…åˆ°æœ¬åœ°  
`install`å¯ä»¥ç®€å†™ä¸º`i`

- å®‰è£…å¤šä¸ªä¾èµ–  
  `<name>`å¤„å¯ä»¥å†™å¤šä¸ªä¾èµ–åï¼Œç”¨ç©ºæ ¼éš”å¼€  
- å…³äºå®‰è£…ä¾èµ–çš„ç‰ˆæœ¬  
  - é»˜è®¤è£…æœ€æ–°ç‰ˆ  
  - å®‰è£…æŒ‡å®šç‰ˆæœ¬ä¾èµ–çš„æ–¹æ³•  
    åœ¨ç‰ˆæœ¬å·å‰åŠ ä¸Š`@`ï¼ˆä¸ç„¶åº”è¯¥ä¼šå®‰è£…å°ç‰ˆæœ¬å·é‡Œçš„æœ€æ–°ç‰ˆï¼‰  
    ç¤ºä¾‹å¦‚ä¸‹ï¼š  
    ` npm install --save-dev webpack@4.46.0`  
  - ç‰ˆæœ¬å·åªå†™ç¬¬ä¸€ä½æˆ–è€…å¤´ä¸¤ä½ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œnpmä¼šè‡ªåŠ¨å¯»æ‰¾ç¬¦åˆè¦æ±‚çš„æœ€æ–°ç‰ˆæœ¬çš„åŒ…è¿›è¡Œå®‰è£…
  
- å®‰è£…`package.json`é‡Œçš„æ‰€æœ‰ä¾èµ–  
  åœ¨`package.json`æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œ`npm install`å³å¯
- å®‰è£…å…¨å±€ä¾èµ–  
  åœ¨ä¾èµ–åååŠ ä¸Š`-g`å³å¯



##### common options

`--save-dev`åœ¨[å®˜ç½‘](https://docs.npmjs.com/cli/v6/commands/npm-install)å°±è¢«ç§°ä¸ºcommon options

- ä¹¦å†™ä½ç½®  
  å®˜ç½‘é‡Œéƒ½æ˜¯å†™åœ¨åŒ…ååé¢ï¼Œä¸è¿‡[webpackå®˜ç½‘](https://v4.webpack.js.org/guides/typescript/)å’Œ[bootstrapå®˜ç½‘](https://getbootstrap.com/docs/4.0/getting-started/webpack/#importing-javascript)éƒ½æ˜¯å†™åœ¨åŒ…åå‰é¢


###### `--save-dev`

ç¼©å†™ä¸º`-D`  
--save-devåˆ™æ˜¯åŠ åœ¨devDependenciesä¸­  
devDependenciesä»£è¡¨å¼€å‘æ—¶ä½¿ç”¨ï¼Œè€Œç”Ÿäº§ä¸ä½¿ç”¨ï¼Œå¦‚gulpã€babelç­‰  

###### `--save`

ï¼ˆ[å®˜ç½‘](https://docs.npmjs.com/cli/v6/commands/npm-install)é‡Œæœä¸åˆ°`--save`ï¼‰

> åŒ…é»˜è®¤å°±ä¼šæ”¾åˆ°dependenciesé‡Œ â€”â€” [å®˜ç½‘](https://docs.npmjs.com/cli/v6/commands/npm-install#description)

- ï¼ˆ-gï¼‰åé¢åŠ ä¸Š--saveä¼šå‘package.jsonçš„dependencieså­—æ®µä¸­å¢åŠ å‡†å¤‡å®‰è£…çš„ä¾èµ–  

- å·²æ·»åŠ è‡³devDependencieså†--saveå®‰è£…ä¹Ÿä¸ä¼šä»devDependenciesè½¬ç§»è‡³dependencies  
  npmç‰ˆæœ¬ï¼š6.14.11  
  nodeç‰ˆæœ¬ï¼š10.22.0

###### `dependencies`ä¸`devDependencies`

- dependenciesä¸­çš„ä»£è¡¨ç”Ÿäº§æ—¶ä½¿ç”¨ï¼Œå¦‚vueã€vuexç­‰  
- devDependenciesä¸­çš„ä»£è¡¨åªåœ¨å¼€å‘æ—¶ä½¿ç”¨

###### `peerDependencies`

peerDependenciesçš„ä½œç”¨ä¼¼ä¹æ˜¯æ‹’ç»æ‰“åŒ…éƒ¨åˆ†ä¾èµ–ï¼Œbootstrapå°±æ˜¯è¿™æ ·åšçš„



##### å®‰è£…å¤±è´¥

- å•ä¸ªä¾èµ–æ²¡æ³•è£…  
  æœ‰å¯èƒ½æ˜¯æ— æ³•å®‰è£…æœ€æ–°ç‰ˆ  
  å•ç‹¬å®‰è£…è¯¥ä¾èµ–æœ€ä½è¦æ±‚ç‰ˆæœ¬ï¼Œç„¶åå†npm iå³å¯  

  - æŸæ¬¡å‡ºç°è¯¥é—®é¢˜çš„æŠ¥é”™å¦‚ä¸‹  

    ```cmd
    npm ERR! code ETARGET
    npm ERR! notarget No matching version found for @babel/helper-compilation-targets@^7.15.0.
    npm ERR! notarget In most cases you or one of your dependencies are requesting
    npm ERR! notarget a package version that doesn't exist.
    npm ERR! notarget
    npm ERR! notarget It was specified as a dependency of '@babel/preset-env'
    npm ERR! notarget
    
    npm ERR! A complete log of this run can be found in:
    npm ERR!     C:\Users\admin\AppData\Roaming\npm-cache\_logs\2021-08-11T02_51_25_016Z-debug.log
    ```




### å‡çº§ã€æŸ¥çœ‹ã€å¸è½½

[å‡çº§ä¾èµ–](https://blog.csdn.net/zyj362633491/article/details/86087481)

- æ›´æ–°å…¨éƒ¨  
  npm update
- æ›´æ–°å•ä¸ª  
  npm update ä¾èµ–å

**æŸ¥çœ‹ä¾èµ–**

- æŸ¥çœ‹å½“å‰ç›®å½•ä¾èµ–  
  [`npm list`](https://docs.npmjs.com/cli/v6/commands/npm-ls)  
  ä¼šåˆ—å‡ºå¦‚ä¸‹å†…å®¹
  - ä¸€çº§ä¾èµ–
  - ä¸€çº§ä¾èµ–çš„ä¾èµ–
  - è¯¥è£…æœªè£…çš„ä¾èµ–


**å¸è½½ä¾èµ–**

è¿™ä¸ªæ˜¯[å®˜æ–¹ä»‹ç»çš„é“¾æ¥](https://docs.npmjs.com/uninstalling-packages-and-dependencies)

ä¸€èˆ¬é€‰æ‹©[ä»package.jsonä¸­åˆ é™¤æœ¬åœ°åŒ…](https://docs.npmjs.com/uninstalling-packages-and-dependencies#removing-a-local-package-from-the-packagejson-dependencies)

- `dependenciesçš„`è¯ç”¨å¦‚ä¸‹å‘½ä»¤  
  `npm uninstall --save ä¾èµ–å`ï¼ˆä¸åŠ --saveä¹Ÿå¯ä»¥ï¼Œæµ‹è¯•çš„npmç‰ˆæœ¬:6.14.11ï¼‰
- `devDependencies`çš„è¯ç”¨å¦‚ä¸‹å‘½ä»¤  
  `npm uninstall --save-dev ä¾èµ–å`ï¼ˆä¸åŠ --save-devä¹Ÿå¯ä»¥ï¼Œæµ‹è¯•çš„npmç‰ˆæœ¬:6.14.11ï¼‰
- åˆ é™¤å…¨å±€ä¾èµ–  
  `npm uninstall -g åŒ…å`




### npm script
- å¯é€šè¿‡ç»™`package.json`çš„`scripts`å±æ€§æ·»åŠ å±æ€§æ¥æ·»åŠ è„šæœ¬  
  è„šæœ¬å¯ä»¥æ˜¯ä»»æ„å‘½ä»¤è¡Œä»£ç 
- è„šæœ¬é‡Œå¯ä»¥ç”¨`&&`è¿æ¥ä¸¤ä¸ªå‘½ä»¤ï¼ˆ`&&`å‰åè¦åŠ ç©ºæ ¼ï¼‰
- ã€ã€‘å¾…æ•´ç†  
  ï¼ˆå½“å‰ç›®å½•çš„node_modules/.binå­ç›®å½•é‡Œé¢çš„æ‰€æœ‰è„šæœ¬ï¼Œéƒ½å¯ä»¥ç›´æ¥ç”¨è„šæœ¬åè°ƒç”¨ï¼Œè€Œä¸å¿…åŠ ä¸Šè·¯å¾„ï¼‰  
  - è¦å†™package.jsoné‡Œçš„è„šæœ¬è¦åŠ `npm run`ï¼ˆä¸å¯ç”¨çœç•¥ï¼‰
- è¿è¡Œä¾èµ–  
  - ä¸¾ä¸ªä¾‹å­  
    å¦‚æœåªæœ‰é¡¹ç›®é‡Œæœ‰è£…webpack4è€Œå…¨å±€æ²¡è£…  
    é‚£`npm webpack`å’Œ`webpack`éƒ½æ— æ³•æ‰“åŒ…  
    è€Œåœ¨scripté‡ŒåŠ `"aa":"webpack"`å`npm run aa`å³å¯è¿›è¡Œæ‰“åŒ…


##### npm script é’©å­
å¯åœ¨npm scriptçš„è„šæœ¬å‰åŠ å…¥å‰ç¼€ï¼Œå¯åŠ å‰ç¼€æœ‰preå’Œpostã€‚  
å¦‚package.jsonä¸­å†™ï¼š  

```json
"preb": "echo 1",  
"b": "echo 2",  
"postb": "echo 3"  
```

åœ¨npm run båæ‰§è¡Œé¡ºåºå°±æ˜¯preb && b && postbã€‚ï¼ˆ&&ä»£è¡¨ç»§å‘æ‰§è¡Œï¼Œå³åªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æˆåŠŸï¼Œæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œè¿™ä¸ªç¬¦å·æ˜¯ Bashï¼ˆï¼Ÿï¼Ÿï¼‰ çš„åŠŸèƒ½ï¼‰  

### node_modules

- é¡¹ç›®æ–‡ä»¶å¤¹å†…è£…äº†ä¾èµ–å<span style='opacity:.5'>ï¼ˆæœ‰äº†node_modulesæ–‡ä»¶å¤¹åï¼‰</span>  
  ä¸€æ ·å¯ä»¥æ›´æ”¹é¡¹ç›®æ–‡ä»¶å¤¹çš„åç§°<span style='opacity:.5'>ï¼ˆæ›´æ”¹å¯ä»¥å¿«é€Ÿç”Ÿæ•ˆï¼Œä¾èµ–ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼‰</span>
- æ–‡ä»¶å¤¹å­çº§å†…å®¹å°‘çš„è¯ç§»åŠ¨èƒ½å¿«é€Ÿç”Ÿæ•ˆï¼ˆå°±ç®—å­™çº§å†…å®¹å¾ˆå¤šä¹Ÿæ˜¯è¿™æ ·ï¼‰  
  è·¨ç›˜æœªæµ‹è¯•ï¼ˆæ¯”å¦‚Dç›˜åˆ°Eç›˜ï¼‰  
- ä¸è”ç½‘æ›´æ–°æŸä¸ªä¾èµ–çš„æ–¹æ³•  
  - ä¸€æ¬¡æˆåŠŸçš„ç»éªŒ  
    1. æŠŠnode_modulesæ‹·åˆ°æœ‰ç½‘ç»œçš„æœºå­ä¸Š  
    2. `npm update ä¾èµ–å`
    3. æŠŠæ— ç½‘ç»œçš„node_modulesé‡Œè¯¥ä¾èµ–çš„ç›¸å…³æ–‡ä»¶å¤¹åˆ æ‰  
       æŠŠæœ‰ç½‘ç»œçš„node_modulesé‡Œè¯¥ä¾èµ–ç›¸å…³æ–‡ä»¶å¤¹å¤åˆ¶è¿›æ¥
    4. æ›´æ–°æ— ç½‘ç»œçš„é¡¹ç›®é‡Œpackage.jsoné‡Œè¯¥ä¾èµ–çš„ç‰ˆæœ¬å·
- nodeç‰ˆæœ¬ä¸åŒçš„è¯node_modulesæœ‰å¯èƒ½ä¸é€šç”¨
- å°†å±€éƒ¨ä¾èµ–å¤åˆ¶åˆ°å…¨å±€ä¾èµ–ç›®å½•æ˜¯ä¸å¯ç”¨çš„  
  ä¾‹å­ï¼šå±€éƒ¨å®‰è£…cnpmåå†æ‹–åˆ°å…¨å±€ç›®å½•é‡Œ
- node_modulesåŒ…çš„å…¥å£  
  ä¼¼ä¹æ˜¯package.jsonçš„mainå±æ€§æŒ‡å®šçš„  
  å¯ä»¥æ˜¯css

### npx

**ç®€ä»‹**

æ„Ÿè§‰åƒæ˜¯npmçš„å‡çº§ç‰ˆ  
npm5.2ä»¥åè‡ªå¸¦npx  
npxåŠŸèƒ½å¯ä»¥åˆ†ä¸ºä¸‰å—

- äºŒè¿›åˆ¶æ–‡ä»¶ç›¸å…³
- è¿œç¨‹ç›¸å…³
- ä¾èµ–ç®¡ç†

**å…·ä½“åŠŸèƒ½**

- è¿è¡Œä¾èµ–  
  - ä¸¾ä¸ªä¾‹å­  
    å¦‚æœåªæœ‰é¡¹ç›®é‡Œæœ‰è£…webpack4è€Œå…¨å±€æ²¡è£…  
    é‚£`npm webpack`å’Œ`webpack`éƒ½æ— æ³•æ‰“åŒ…  
    è€Œ`npx webpack`å¯ä»¥è¿›è¡Œæ‰“åŒ…



### cnpm

ä¸‹è½½å‘½ä»¤

- `npm i cnpm`
- `npm install cnpm -g --registry = httpsï¼š//r.npm.taobao.org`  
  åº”è¯¥æ˜¯ä¸‹è½½å‘½ä»¤  
  æ˜¯çš„è¯è¿™æ–¹æ³•åº”è¯¥æ›´å¿«







- cnpmä¸‹è½½çš„æ–‡ä»¶å¤¹åœ¨node_modulesé‡Œæ˜¯ä»¥ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å¼€å¤´çš„
- ä¸€ä¸ªç”µè„‘ä¸Šåº”è¯¥å¯ä»¥åŒæ—¶ä½¿ç”¨npmå’Œcnpm




# npmå„ç§BUGè§£å†³æ–¹æ¡ˆ




### Error: EBUSY: resource busy or locked
å¾ˆæœ‰å¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜ï¼Œè¿‡ä¸€ä¸¤åˆ†é’Ÿå†è£…ã€æµ‹è¯•äºcnpmç¯å¢ƒä¸‹ã€‘  


### æœ‰ä¸€äº›æ“ä½œæœ‰å¯èƒ½å¯¼è‡´npmä¾èµ–åŒ…æ®‹ç¼ºï¼Œå› æ­¤ä¼šå¯¼è‡´BUG
é‡æ–°è£…ä¸€ä¸‹BUGçš„åŒ…åŸºæœ¬èƒ½è§£å†³ï¼ˆç›´æ¥installé‚£ä¸ªåŒ…å°±è¡Œï¼‰  


###   æœªå‘½å
æœ‰çš„æ—¶å€™åŒ…ä¸èµ·ä½œç”¨ï¼Œè€Œä¸”å„ç§npmæ“ä½œéƒ½ä¼šæç¤ºä¸€ä¸²æ–‡ä»¶ï¼ˆæˆ–ç›®å½•ï¼‰ä¸å­˜åœ¨ï¼Œå¹¶ä¸”è¿™äº›æ“ä½œéƒ½æ— æ³•è¾¾åˆ°ç†æƒ³æ•ˆæœ  
ç»å†x1ï¼šæŸ¥äº†ä¸€æ™šä¸Šè§£å†³ä¸äº†ï¼ŒæŠŠé¡¹ç›®é‡Œçš„node_modulesæ–‡ä»¶å¤¹åˆ äº†ï¼Œé‡æ–°npm installå°±å¥½äº†  


- æœ‰æ—¶npm run devå¤±è´¥å¯ä»¥é€šè¿‡å…³é—­nodeè¿›ç¨‹å†è¾“å…¥å‘½ä»¤è§£å†³ï¼ˆä¸€æ¬¡ä¾‹å­ä¸­ç”¨äº†rollup  



### å…¶ä»–

- `npm install @turf/turf`æ— æ³•å®‰è£…  

  - è§£å†³åŠæ³•ä¸º  
    `npm install '@turf/turf' --save`

  - æŠ¥é”™ä¸º  

    ```
    æºæ–‡æœ¬ä¸­å­˜åœ¨æ— æ³•è¯†åˆ«çš„æ ‡è®°ã€‚
    æ‰€åœ¨ä½ç½® è¡Œ:1 å­—ç¬¦: 13
    + npm install  <<<< @turf/turf --save
        + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException
        + FullyQualifiedErrorId : UnrecognizedToken
    ```

- æŠ¥é”™`'vue-cli-service' ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤,ä¹Ÿä¸æ˜¯å¯è¿è¡Œçš„ç¨‹åº`   
  é¢å¯¹è¿™ä¸ªæŠ¥é”™ï¼Œå…¶å®ä¸éœ€è¦è£…å…¨å±€çš„vue-cli-service  
  å¦‚æœèƒ½æ­£ç¡®å®‰è£…node_moduleså³å¯æ­£å¸¸ä½¿ç”¨  

  - ç¡®è®¤æ˜¯å¦æ­£ç¡®å®‰è£…node_modulesçš„æ–¹æ³•  
    çœ‹å®‰è£…è¿‡ç¨‹ä¸­æ˜¯å¦æœ‰çº¢è‰²æŠ¥é”™
  - å‡ºç°è¯¥æŠ¥é”™çš„å‘½ä»¤ï¼š  
    `"dev": "vue-cli-service serve"`



# yarn

- `npm install -g yarn`è£…çš„æ˜¯yarn1  
- æœ‰çš„é¡¹ç›®åªèƒ½ç”¨yarn1å®‰è£…ï¼Œç”¨yarn2å’Œnpméƒ½ä¸è¡Œ  
  æ¯”å¦‚vue-devtools5.3.4
- ç”¨yarnè£…ä¾èµ–ä¹Ÿå¯ä»¥ä½¿ç”¨`npm run xxx`å‘½ä»¤  
  ï¼ˆå·²æµ‹è¯•äº†yarn1ï¼‰



### [yarn1](https://classic.yarnpkg.com/en/docs/install#windows-stable)
[yarn1ä»“åº“](https://github.com/yarnpkg/yarn)

å®˜ç½‘å†™çš„ç”¨æ³•å¾ˆç®€å•ï¼Œè¿™é‡Œå°±ä¸è®°å½•äº†

- é¢å¯¹æœ‰å¤šä¸ªpackage.jsonçš„é¡¹ç›®  
  åœ¨æ ¹ç›®å½•`yarn install`å¯èƒ½ä¼šæŠŠå¤šä¸ªpackage.jsonéƒ½è£…äº†ï¼ˆä½†æ˜¯å¹¶ä¸æ˜¯è£…äº†æ‰€æœ‰çš„package.jsonï¼‰  
  æ¯”å¦‚vue-devtools5.3.4
- package.jsonæ–°å¢å†…å®¹åç›´æ¥`yarn install`å°±å¯ä»¥
- å‡çº§ä¾èµ–  
  å®˜ç½‘è¯´çš„`yarn upgrade [package]`å¹¶ä¸ä¸æ˜¯å‡çº§æŒ‡å®šä¾èµ–ç”¨çš„ï¼ˆå…·ä½“ä½œç”¨æœªäº†è§£ï¼‰  
  `yarn upgrade [package]@[version]`æ‰è¡Œ
- æ·»åŠ ä¾èµ–æ—¶è¾“çš„ç‰ˆæœ¬å·å±…ç„¶ä¼šåŸå°ä¸åŠ¨åœ°åŠ åˆ°package.jsoné‡Œã€‚ã€‚




### [yarn2](https://yarnpkg.com/getting-started/install)
[yarn2ä»“åº“](https://github.com/yarnpkg/berry)

[å‘½ä»¤å¤§å…¨](https://yarnpkg.com/cli/run)

- ä¼¼ä¹ä¸èƒ½å…¨å±€å®‰è£…
- ä¼¼ä¹è¦åˆ°é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œ`yarn set version berry`æ‰å¯ä»¥åœ¨é¡¹ç›®é‡Œç”¨yarn2
- `yarn set version berry`åº”è¯¥æ˜¯ä¸‹è½½yarn2çš„å‘½ä»¤  
  æ˜¯æœ‰å¯èƒ½ä¸‹è½½å¤±è´¥çš„ï¼Œæ¯”å¦‚å‡ºç°å¦‚ä¸‹æŠ¥é”™ï¼š  
  `error An unexpected error occurred: "https://github.com/yarnpkg/berry/raw/master/packages/berry-cli/bin/berry.js: getaddrinfo ENOENT raw.githubusercontent.com raw.githubusercontent.com:443".`



# babel

### *2020.5.13 æœ€æ–°ç‰ˆbabelå’Œwebpack4ä¸€èµ·ä½¿ç”¨*  

*è¦è¿›ä¸€æ­¥äº†è§£è¿˜æ˜¯æŸ¥å®˜æ–¹èµ„æ–™å­¦ä¹ æ¯”è¾ƒå¥½ï¼Œç½‘ä¸Šåšæ–‡è´¨é‡éƒ½ä¸å¥½*

- `.babelrc`åªè¦æœ‰å°±å¯ä»¥ç”¨

- æ”¯æŒes6æœ€åŸºç¡€åŠŸèƒ½çš„é…ç½®  
  
  1. å®‰è£…ï¼šbabel-loaderã€@babel/coreã€@babel/preset-env
  
  2. ç„¶åéœ€è¦åœ¨`webpack.config.js`é‡Œé…ç½®`module`å±æ€§å°±è¡Œ  
  
     ```javascript // webpack.config.js
     module: {
       rules: [
         {
           test: /\.js$/,
           use: {
             loader: 'babel-loader',
             options: {
               presets: ['@babel/preset-env'] // æ ¹æ®ç›®æ ‡æµè§ˆå™¨è‡ªåŠ¨è½¬æ¢ä¸ºç›¸åº”es5ä»£ç 
             }
           }
         }
       ]
     }
     ```
  
- èƒ½æ”¯æŒclasså…¬ç§æœ‰å­—æ®µçš„é…ç½®  
  
  1. å®‰è£…ï¼šbabel-loaderã€@babel/coreã€@babel/preset-envã€@babel/plugin-proposal-class-properties  
  2. ç„¶åéœ€è¦åœ¨`webpack.config.js`é‡Œé…ç½®`module`å±æ€§å°±è¡Œ  

      ```javascript // webpack.config.js
      module: {
        rules: [
          {
            test: /\.js$/,
            exclude: /(node_modules)/, // æœªç ”ç©¶è¿‡è¦ä¸è¦åŠ 
            use: {
              loader: "babel-loader",
              options: {
                presets: ['@babel/preset-env'], // æ ¹æ®ç›®æ ‡æµè§ˆå™¨è‡ªåŠ¨è½¬æ¢ä¸ºç›¸åº”es5ä»£ç 
                plugins: ['@babel/plugin-proposal-class-properties']
              },
            },
          }
        ]
      }
      ```
  
  

### *æ—©æœŸç»“è®º*

##### ç®€è¦ä½¿ç”¨æ­¥éª¤

1. md node_modulesï¼ŒæŠŠnode_modules excludeæ‰ã€ã€‘æ²¡çœ‹æ‡‚
2. npm init -y  
   cnpm install --save-dev babel-cli  
   type nul>.babelrc

##### api

- **.babelæ–‡ä»¶API**  
  http://babeljs.io/docs/usage/api/#options

- **babel-cliçš„API**  
  https://babeljs.io/docs/usage/cli/

- **è®°å½•**  

  - ä¸€æ¬¡ä½¿ç”¨babel+webpackä¸­å‘ç°æœ‰å˜é‡ä¸å£°æ˜æ—¶ï¼Œchromeä¼šæŠ¥é”™ä¸”jsæ— æ³•è¿è¡Œ

- **å¯¹é¡¹ç›®æœ¬åœ°å®‰è£…babel-cliçš„æƒ…å†µä¸‹**
  é…ç½®package.jsonæ–‡ä»¶çš„scriptsé¡¹å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œbabelï¼Œå¦‚é…ç½®ï¼š  

  ```json
  "scripts": {
    "a": "babel src -d li1b" 
  }
  ```

  è¿è¡Œè¯¥å‘½ä»¤`npm run a`çš„æ—¶å€™å°±ä¼šåœ¨å‘½ä»¤è¡Œæ‰§è¡Œ`babel src -d li1b`  
  æ•ˆæœç­‰åŒäºï¼ˆå…¨å±€å®‰è£…babel-cliåï¼‰ç›´æ¥è¿è¡Œbabel src -d li1b

- **æ”¯æŒæŒ‡å®šéƒ¨åˆ†æµè§ˆå™¨çš„ä¾‹å­**  
  ä¸‹é¢åº”è¯¥æ˜¯.babelrcçš„ä¾‹å­

  ```javascript
  {
  "presets": [[
  	"env",
  	{
  		"targets": {//è¿™ä¸ªtargetsä¹Ÿå¯ä»¥ç”¨npmåŒ…browserslistæ¥ä»£æ›¿
  			"browsers": ["last 2 versions", "ie >= 9"]//è¯¥è¡Œä½¿ç”¨browserslistè¯­æ³•
  			//è¯¥è¯­æ³•è¯¦è§https://github.com/ai/browserslist#queries
  		},
  		"modules": false /* ,
  		"loose": true //ä¸ºæ­¤é¢„è®¾ä¸­çš„ä»»ä½•å…è®¸å®ƒä»¬çš„æ’ä»¶å¯ç”¨â€œå®½æ¾â€è½¬æ¢ï¼ˆé»˜è®¤æƒ…å†µä¸‹ç¦ç”¨ï¼‰ã€‚ã€æ²¡ç”¨è¿‡ã€‘
  		*/
  	}
  ]],
  "plugins": ["transform-object-rest-spread"]//æ”¯æŒâ€œå¯¹è±¡æ‰©å±•ç¬¦â€çš„æ’ä»¶
  }
  ```

- **babel-polyfill**  
  ï¼ˆè¯¦è§ï¼šhttps://www.jianshu.com/p/3b27dfc6785cï¼‰  
  babelè™½ç„¶è½¬è¯‘ESè¯­æ³•ï¼Œä½†æ˜¯ESé™¤äº†è¯­æ³•è¿˜æœ‰APIï¼ˆæˆ–è€…å«å…¨å±€å¯¹è±¡ã€æˆ–è€…å«built-insï¼‰  
  è¦æƒ³è½¬è¯‘è¿™äº›APIåˆ™éœ€è¦babel-polyfillï¼ˆæˆ–è€…babel-runtime&babel-plugin-tranform-runtimeï¼Œä¸è¿‡ä¸€èˆ¬ä¸é€‰æ‹©è¿™ä¸ªæ–¹æ¡ˆï¼‰  
  ä½¿ç”¨æ–¹æ³•ï¼š  

  1. æœ¬åœ°--saveå®‰è£…ï¼ˆå®˜æ–¹è¯´æ˜è¦--saveè€Œä¸æ˜¯--save-devï¼‰
  2. webpackçš„module.exportsä¸­çš„entryå†™ä¸º['babel-polyfill','./src/main.js']  
     ï¼ˆä¸ç”¨webpackçš„è¯ä¹Ÿæœ‰å…¶ä»–ä½¿ç”¨æ–¹æ³•ï¼‰



# BublÃ©

å¾ˆç®€å•ï¼Œä½†æ˜¯æ”¯æŒæœ‰é™ï¼ˆç±»çš„å…¬ã€ç§æœ‰å­—æ®µå°±ä¸æ”¯æŒï¼‰

å®‰è£…buble-loaderã€buble

webpack4ç¤ºä¾‹

```javascript // webpack.config.js
module: {
  rules: [
    {
      test: /\.js$/,
      exclude: /(node_modules)/,
      use: {
        // loader: "babel-loader",
        loader: "buble-loader",
        options: {objectAssign: 'Object.assign'}
      },
    }
  ]
}
```





# cssè‡ªåŠ¨å…¼å®¹å¤„ç†=autoprefixer

è¦ç”¨autoprefixerå…ˆè¦è£…å¦å¤–3ä¸ªnpmåŒ…ï¼š  

- postcss
- postcss-loader
- browserslist

è£…å¥½åè¿˜è¦è¿›è¡Œé…ç½®ï¼š  

1. æ–°å»ºæ–‡ä»¶â€œpostcss.config.jsâ€ï¼Œæ–‡ä»¶é‡Œå†™ï¼š

   ```javascript
   module.exports = {
      plugins: [
   	   require('autoprefixer')
      ]
   }
   ```


2. ä¿®æ”¹â€œwebpack.config.jsâ€

   1. é¡¶ç«¯varéƒ¨åˆ†æœ«å°¾åŠ ä¸Š
      `var autoprefixer = require('autoprefixer');`
   2. module.exportsçš„moduleçš„rulesçš„â€œlessâ€å­é¡¹å’Œâ€œcssâ€å­é¡¹çš„useå­é¡¹æˆ–loaderå­é¡¹æœ€æœ«å°¾åŠ ä¸Š"postcss-loader"

3. åœ¨package.jsonä¸­é…ç½®browserslist,ä¾‹å­å¦‚ä¸‹ï¼š

   ```json
   {
     "name": "inputprojectnamehere",
   
     ...
   
     "dependencies": {
       ...
     },
     "devDependencies": {
       ...
     },
     "browserslist": [
       "last 2 versions",
       "ie >= 9"
     ]
   }
   ```





# rollupä¸webpackæ¯”è¾ƒ

> å¼€å‘åº”ç”¨æ—¶ç”¨webpackï¼Œç”¨es6å¼€å‘åº“æ—¶ç”¨rollup â€”â€” [åšå®¢A](http://t.zoukankan.com/163yun-p-10102523.html)ä¸[åšå®¢B](https://www.jianshu.com/p/60070a6d7631)

> rollupç”Ÿæˆçš„å†—ä½™ä»£ç æ¯”webpackå°‘ï¼Œæ›´é€‚åˆæ‰“åŒ…lib â€”â€” çŸ¥ä¹Luka



# rollup

### é…ç½®

**input**

ä»£ç å…¥å£æ–‡ä»¶åœ°å€

**output**

- file  
  è¾“å‡ºæ–‡ä»¶åœ°å€ï¼ˆåŒ…æ‹¬æ–‡ä»¶åä¸åç¼€åï¼‰






# webpack3



### è®°å½•

jsï¼šrequire("./style.css");
ä¸é…ç½®webpack.config.jsæ‰§è¡Œï¼šwebpack runoob1.js bundle.js --module-bind 'css=style-loader!css-loader'
æ— æ³•ç”Ÿæ•ˆ
jsï¼šrequire("./style.css");
é…ç½®webpack.config.jsæ‰§è¡Œï¼šwebpack
å¯ä»¥ç”Ÿæ•ˆ

### åˆ†ç¦»csså¤±è´¥

1ã€å®˜ç½‘æ–¹æ³•æ‰“åŒ…äº†cssä½†æ²¡å¼•å…¥ï¼ˆæœ‰å¯èƒ½å°±æ˜¯æ‰‹å†™å¼•å…¥çš„ï¼Œå› ä¸ºèƒ½æŠŠå¤šä¸ªcssæ‰“åŒ…æˆ1ä¸ªï¼‰
2ã€ç®€ä¹¦æ–¹æ³•webpack.optimize.CommonsChunkPluginä¸çŸ¥é“æ˜¯ä»€ä¹ˆ

### å‘½ä»¤

webpackâ€“ (ç”¨äºæ„å»ºä¸€ä¸ªå¼€å‘ç›®å½•)
webpack -pâ€“ (ç”¨äºæ„å»ºä¸€ä¸ªç”Ÿäº§ç›®å½•(å‹ç¼©è¿‡çš„))
webpack --watchâ€“ (ç”¨äºè¿ç»­åœ°æ„å»º)
webpack -dâ€“ (å±•ç¤ºæ˜ å°„å…³ç³»)
webpack --colorsâ€“ (ç”¨äºç¾åŒ–å±•ç¤ºçš„ä¿¡æ¯)

### æ¨¡å—

ä½¿ç”¨webpackå°±å¯ä»¥ä½¿ç”¨æ¥è‡ªES6çš„exportã€importåŠCommonJSçš„requireã€module.exportsï¼ˆä¸»æµæ˜¯ä½¿ç”¨ES6çš„æ¨¡å—è¯­æ³•ï¼Œè€Œä¸”CommonJSçš„æ¨¡å—å¹¶æœªåšæ·±å…¥ç ”ç©¶ï¼‰

æ¨¡å—æ“ä½œä¸nodeJSä¸€è‡´

ã€ã€‘æµ‹è¯•ä¸€ä¸‹cdnçš„jqæ˜¯å¦ä¼šè¢«æ‰“åŒ…

### webpack-dev-server

åœ¨å®‰è£…åï¼Œæ‰§è¡Œcmdä½¿ç”¨
1ã€webpack-dev-serveræ‹¥æœ‰æ­å»ºæ¨¡æ‹ŸæœåŠ¡å™¨çš„åŠŸèƒ½ï¼ˆç¼–è¯‘æºæ–‡ä»¶è‡³å†…å­˜ï¼‰
ç½‘é¡µåœ°å€åœ¨http://localhost:8080/
2ã€webpack-dev-server --open
å¯ä»¥åœ¨æ­å»ºæ¨¡æ‹ŸæœåŠ¡å™¨åè‡ªåŠ¨æ‰“å¼€ç½‘é¡µ
3ã€webpack-dev-server --progress
æ‹¥æœ‰åœ¨ç¼–è¯‘æºæ–‡ä»¶åè‡ªåŠ¨åˆ·æ–°ç½‘é¡µçš„åŠŸèƒ½
ï¼ˆ--openå’Œ--progresså¯ä»¥è¿ç”¨ï¼‰

ï¼ˆè®°å½•ï¼‰æ”¾äºnpmä¸­è¿˜ä¸å¯ä½¿ç”¨
webstorm jsæ”¹ä¸ºes6å--progressä¸å¯ç”¨ï¼Œä¸”æ¨¡æ‹ŸæœåŠ¡å™¨å˜ä¸ºä»ç¼–è¯‘åæ–‡ä»¶è·å–å†…å®¹
æ”¹å›es5ä¸”åˆ é™¤console.logè¯­å¥åŠ ä¸ŠpublicPath: '/dist/'ååˆå˜å›åŸæ ·ï¼Œé©¬ä¸Šåˆæ”¹es6ä¸”åŠ ä¸Šconsole.logè¯­å¥ä¾æ—§å¯ç”¨
ç»“è®ºï¼šä¸¤ç§æƒ…å†µå¾ˆå¯èƒ½æ˜¯publicPath: '/dist/'å†³å®šçš„

### cross-env buildå‡ºæ¥çš„ç½‘é¡µçš„èµ„æºåœ°å€

éƒ½ä¼šä»httpæœåŠ¡å™¨çš„æ ¹ç›®å½•ä¸Šå»æ‰¾ï¼Œå°±ç®—æŠŠè¯·æ±‚è¿™äº›èµ„æºçš„htmlç§»è¿›å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™äº›èµ„æºçš„åœ°å€ä¾æ—§æ˜¯ä»æ ¹ç›®å½•ä¸Šå»æ‰¾èµ·
ï¼ˆcross-envçš„ç›¸å…³ä¿¡æ¯ä¼¼ä¹æ²¡æ‰¾åˆ°å¤šå°‘ï¼Œç”šè‡³å±äºä»€ä¹ˆä¸œè¥¿éƒ½ä¸çŸ¥é“ï¼‰

### `webpack.config.js`

åŸºç¡€å†™æ³•

```javascript
module.exports = {
    //å…¥å£æ–‡ä»¶è®¾å®šä¸ºä¸webpack.config.jsåŒçº§çš„s1.jsæ–‡ä»¶
    entry : './s1.js',
    output : {//è¾“å‡ºæ–‡ä»¶
        filename : 'bundle.js',//è¾“å‡ºæ–‡ä»¶å
        //è¾“å‡ºæ–‡ä»¶å¤¹è®¾å®šä¸ºwebpack.config.jsæ‰€åœ¨çš„æ–‡ä»¶å¤¹
        path : __dirname + '/dist'
    },
    module: {
        rules: [//ä¸åŒæ–‡ä»¶çš„å¤„ç†æ–¹æ³•æ”¾åœ¨è¿™
            {
                test: /\.js$/,//åŒ¹é…jsæ–‡ä»¶
                loader: 'babel-loader',//ä½¿ç”¨babel-loaderä¾èµ–å¤„ç†
                //åº”è¯¥æ˜¯æŠŠnode_modulesæ–‡ä»¶å¤¹æ’é™¤æ‰
                exclude: /node_modules/
            },
            {
                //ç”¨æ­£åˆ™åŒ¹é…ä¸åŒåç¼€åçš„æ–‡ä»¶
                //åŒ¹é…å¤šä¸ªæ–‡ä»¶çš„å†™æ³•æ˜¯/\.(a|b|c|d)$/
                test:/\.xx$/
                ...
            }
        ]
    },
    plugins:[//æœªæµ‹è¯•æˆåŠŸ
        new webpack.BannerPlugin('èœé¸Ÿæ•™ç¨‹ webpack å®ä¾‹')
    ]
}
```





# webpack4



æœªäº†è§£å†…å®¹

- [ä»£ç æ‹†åˆ†](https://v4.webpack.js.org/guides/code-splitting/#dynamic-imports)è¿˜æ²¡çœ‹å®Œ  
  ä»â€œDynamic Importsâ€å¼€å§‹çœ‹

- ç¼©å‡åŒ…å¤§å°æ–¹é¢

  - ä¸€æ¬¡æ‰“åŒ…æ—¶çš„æŠ›é”™  

    ```
    WARNING in webpack performance recommendations: 
    You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.
    For more info visit https://webpack.js.org/guides/code-splitting/
    ```
    
  - å¯ä»¥è€ƒè™‘ä½¿ç”¨[bundle åˆ†æ](https://v4.webpack.docschina.org/guides/code-splitting/#bundle-%E5%88%86%E6%9E%90-bundle-analysis-)

- [æ›´å¤šä¼˜åŒ–æ“ä½œ](https://juejin.cn/post/6844904079320154126)

- [é…ç½®Htmlæ¨¡æ¿](https://juejin.im/post/5adea0106fb9a07a9d6ff6de)

- ä¸çŸ¥é“æœ‰æ²¡æœ‰[rollupçš„ç²¾ç®€åŠŸèƒ½](https://www.rollupjs.com/guide/introduction/#tree-shaking)



### [èµ·æ­¥](https://v4.webpack.docschina.org/guides/getting-started/)

- **éœ€è¦è°ƒæ•´`package.json`**  
  `npm init -y`åè¦åšå¦‚ä¸‹æ“ä½œ
  1. åˆ æ‰`"main": "index.js",`
  2. åŠ ä¸Š`"private": true,`
- [å®‰è£…](https://v4.webpack.docschina.org/guides/installation/#%E6%9C%AC%E5%9C%B0%E5%AE%89%E8%A3%85)  
  `npm install webpack@4 webpack-cli --save-dev`
- **è¿è¡Œ**  
  `npx webpack`  
  è¿™æ—¶å€™å°±ä¼šä»¥`src/index.js`ä¸ºå…¥å£ï¼Œæ‰“åŒ…å‡º`dist/main.js`  
  åªéœ€è¦å‘½ä»¤è¡Œå³å¯ä½¿ç”¨webpackï¼ˆé…ç½®æ–‡ä»¶å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼‰  
  - ä½¿ç”¨`webpack`è¿è¡Œ  
    è¿™ç§æ–¹å¼éœ€è¦å…¨å±€å®‰è£…webpack  
    ä¹‹å‰çš„æµ‹è¯•ä¸­æ²¡å‘ç°`npx webpack`å’Œ`webpack`çš„ç»“æœæœ‰ä»€ä¹ˆå·®å¼‚






### jsæ¨¡å—

- é»˜è®¤æ”¯æŒé…åˆå…¶ä»–ä¾èµ–ä½¿ç”¨  
- é»˜è®¤æ”¯æŒes6æ¨¡å—å’ŒCommonJS
- **æ··ç”¨es6æ¨¡å—ä¸CommonJS**  
  æŒ‰ç»éªŒçœ‹ï¼šåŒæ–‡ä»¶é‡Œç”¨es6å¯¼å…¥å¹¶ä¸”ç”¨CommonJSå¯¼å‡ºæ¯”è¾ƒå®¹æ˜“å‡ºé—®é¢˜



##### [å¼‚æ­¥åŠ è½½æ¨¡å—](https://v4.webpack.js.org/guides/code-splitting/#dynamic-imports)

ï¼ˆæ²¡çœ‹å®Œï¼Œä¸‹é¢è®°çš„å†…å®¹ä¹Ÿæ²¡æœ‰å®æ“è¿‡ï¼‰

**[`import()`](https://v4.webpack.js.org/api/module-methods/#import-1)**

- demo  

  ```js
  if ( module.hot ) {
    import('lodash').then(_ => {
      // Do something with lodash (a.k.a '_')...
    });
  }
  ```

- å…³äºåŠ¨æ€è¡¨è¾¾å¼  
  ï¼ˆåŠ¨æ€è¡¨è¾¾å¼çš„æ„æ€å°±æ˜¯ä¼ å…¥`import`å‡½æ•°çš„å‚æ•°æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼‰  

  > æ— æ³•å®Œå…¨åŠ¨æ€
  >
  > å‚æ•°å¿…é¡»åŒ…å«ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´import(\`./locale/${xxx}.json\`)
  >
  > å°±ä¼šæŠŠ./localeç›®å½•ä¸‹æ‰€æœ‰jsonæ–‡ä»¶æ‰“åŒ…æˆchunk
  >
  > â€”â€” [å®˜ç½‘](https://v4.webpack.js.org/api/module-methods/#dynamic-expressions-in-import)

- [è¿›é˜¶](https://v4.webpack.js.org/api/module-methods/#magic-comments)

- åœ°å€ç®€å†™  
  åƒimport`.vue`ã€`.js`æ–‡ä»¶æ—¶å¯ä»¥çœç•¥åç¼€  
  ä¸è¿‡å¦‚æœ`.vue`çš„æ–‡ä»¶åé‡Œå¸¦æœ‰`.`é‚£å°±ä¸èƒ½çœç•¥ï¼ˆ`.js`çš„å¯ä»¥ï¼‰

- ä¸€æ¬¡çƒ­æ›´æ–°éƒ¨åˆ†å¤±æ•ˆçš„ç»éªŒ  
  æœ‰è¿›è¡Œç›®å½•å˜æ›´  
  å˜æ›´ç›®å½•çš„æ–‡ä»¶å¯¼å…¥äº†è·¯ç”±  
  è¿™ä¸ªæ–‡ä»¶ä¸ä¼šæ›´æ–°ï¼Œå…¶ä»–ä¼š  
  åœ¨è·¯ç”±æ–‡ä»¶é‡Œctrl+så¯ä»¥æ›´æ–°åˆ°å“ªä¸ªæ–‡ä»¶  
  è§£å†³åŠæ³•ï¼šå–æ¶ˆdevå‘½ä»¤ï¼Œé‡æ–°è·‘å³å¯  
  è¿›ä¸€æ­¥æè¿°ï¼šè¿™æƒ…å†µçš„æœ‰æ®µæ—¶é—´å˜æ›´ç›®å½•ä¼šè¿æ–‡ä»¶éƒ½æ‰¾ä¸åˆ°

  - vue-cli:4.5.1
  - "@vue/cli-service": "4.4.4"
  - "vue-router": "3.0.2",
  - webpackï¼šåº”è¯¥æ˜¯4

  



ä»¥ä¸‹2ä¸ªloaderå¯¹äºå¼‚æ­¥åŠ è½½æ¨¡å—å¯èƒ½æœ‰å¸®åŠ©

> - [`bundle-loader`](https://v4.webpack.docschina.org/loaders/bundle-loader)ï¼šç”¨äºåˆ†ç¦»ä»£ç å’Œå»¶è¿ŸåŠ è½½ç”Ÿæˆçš„ bundleã€‚
> - [`promise-loader`](https://github.com/gaearon/promise-loader)ï¼šç±»ä¼¼äº `bundle-loader` ï¼Œä½†æ˜¯ä½¿ç”¨äº† promise APIã€‚
>
> â€”â€” [å®˜ç½‘](https://v4.webpack.docschina.org/guides/code-splitting/#%E9%98%B2%E6%AD%A2%E9%87%8D%E5%A4%8D-prevent-duplication-)





### jsç‰ˆæœ¬

é»˜è®¤é…ç½®å°±èƒ½æ”¯æŒes6è¯­æ³•ï¼ˆå¯¹è±¡æ‰©å±•è¿ç®—ç¬¦éƒ½æ”¯æŒï¼‰  
ä¸è¿‡ä¸‹é¢çš„è¯­æ³•ä¸æ”¯æŒ  

```js
class A {
  a=1
}
```

- åŠ ä¸Šbabelå°±æ”¯æŒäº†  
  å¢åŠ æ–¹å¼å¦‚ä¸‹

  - package.json  

    ```json
    "@babel/core": "^7.9.6",
    "@babel/plugin-proposal-class-properties": "^7.8.3",
    "@babel/plugin-transform-runtime": "^7.9.6",
    "@babel/preset-env": "^7.9.6",
    "babel-loader": "^8.1.0"
    ```

  - `webpacké…ç½®å¯¹è±¡.module.rules`æ•°ç»„é‡ŒåŠ ä¸€ä¸ªå­é¡¹  

    ```json
    {
        test: /\.js$/, // å…¶ä»–å­é¡¹åŠ äº†jsçš„è¯å¯èƒ½è¿™æ ·å†™å°±ä¸okäº†
        exclude: /(node_modules)/,
        use: {
            loader: "babel-loader",
            options: {
                presets: ['@babel/preset-env'], // æ ¹æ®ç›®æ ‡æµè§ˆå™¨è‡ªåŠ¨è½¬æ¢ä¸ºç›¸åº”es5ä»£ç 
                plugins: ['@babel/plugin-proposal-class-properties']
            },
        },
    }
    ```

    




### ç‰¹ç‚¹

- é»˜è®¤ä¸ä¼šæ‰“åŒ…å›¾ç‰‡ 
- æ‰¾åŒçº§çš„ä¸œè¥¿è·¯å¾„å‰è¦åŠ `./`
- æŒ‰éœ€æ‰“åŒ…  
  é»˜è®¤å°±æ˜¯æŒ‰éœ€æ‰“åŒ…çš„  
  ä¸è¿‡å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šæŒ‰éœ€æ‰“åŒ…çš„ç»†ç²’åº¦æ˜¯åŒ…  
  ä¸€ä¸ªåŒ…åªè¦importäº†ï¼Œå°±ä¼šè¢«æ‰“åŒ…ï¼Œä¸ç®¡ä½ æ˜¯æ•´ä¸ªimportè¿˜æ˜¯åªimportå‡ ä¸ªæ–¹æ³•
- æœ‰æ—¶å€™æŠ¥é”™ä½ç½®æ²¡é‚£ä¹ˆå‡†ç¡®  
  æ¯”å¦‚æŸä¸ªæ–‡ä»¶è¯­æ³•é”™è¯¯ä¼šæŠ¥å…¶çˆ¶æ–‡ä»¶åŠç¥–å…ˆæ–‡ä»¶çš„é”™ï¼Œè€Œä¸ä¼šæŠ¥è¿™ä¸ªæ–‡ä»¶æœ¬èº«çš„
- æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹åç›¸åŒæˆ–åªæœ‰å¤§å°å†™ä¸åŒæ—¶æ‰“åŒ…å¯èƒ½å‡ºé”™  
  è¿™æ˜¯webpackä¸€æ¬¡æŠ¥é”™çš„å†…å®¹  
  æŠ¥é”™æ—¶çš„æƒ…å†µä¸ºï¼š  
  - åŒçº§ç›®å½•ä¸­æœ‰ä¸€ä¸ªjsæ–‡ä»¶åå’Œä¸€ä¸ªæ–‡ä»¶å¤¹ååªæœ‰å¤§å°å†™ä¸åŒ  
    æ–‡ä»¶å¤¹ä¸­çš„index.jsæœ‰å¯¼å‡ºå†…å®¹  
    ç„¶åimportäº†æ–‡ä»¶å¤¹ï¼ˆè·¯å¾„æ²¡å†™åˆ°index.jsï¼Œå†™çš„è¯ä¸ä¼šæœ‰é—®é¢˜ä¹Ÿä¸ä¼šæŠ¥é”™ï¼‰
  - ç»“æœåœ¨å¯¼å…¥æ–‡ä»¶å¤¹æ—¶å¯¼å…¥ç»“æœæ˜¯é‚£ä¸ªåç§°ç±»ä¼¼çš„æ–‡ä»¶è€Œä¸æ˜¯æƒ³è¦çš„æ–‡ä»¶å¤¹





éé‡ç‚¹ç‰¹ç‚¹

- é»˜è®¤æ˜¯ä¼šæ›´æ”¹ `import` å’Œ `export` è¯­å¥ä»¥å¤–çš„ä»£ç çš„ï¼Œè¿™å’Œ[å°è®°ä¸­æ–‡æ–‡æ¡£](https://webpack.docschina.org/guides/getting-started/#%E6%A8%A1%E5%9D%97)åŠ[å®˜æ–¹æ–‡æ¡£](https://v4.webpack.js.org/guides/getting-started/#modules)ä¸­çš„è¯´æ³•æ˜¯ç›¸åçš„ï¼ˆå‘ç”Ÿè¿™æƒ…å†µæ—¶æ˜¯å¦æœ‰åŠ loaderï¼Ÿï¼Ÿï¼‰  
  æ‰€ä»¥ç”¨es6çš„è¯æœ€å¥½è¿˜æ˜¯è½¬æ¢ä¸€ä¸‹ï¼Œä¸ç„¶webpackæœ‰å¯èƒ½æ— æ³•ç¼–è¯‘ï¼ˆè¿™ä¸ªè½¬æ¢æ˜¯æŒ‡åŠ å…¥babelè¿™ç§pluginï¼Ÿï¼Ÿï¼‰





### é…ç½®æ–‡ä»¶



##### æŒ‡å®šé…ç½®æ–‡ä»¶  

- å¯ä»¥ç”¨å‘½ä»¤è¡ŒæŒ‡å®šé…ç½®æ–‡ä»¶  
  å‘½ä»¤è¡Œä¸ºï¼š`webpack --config é…ç½®æ–‡ä»¶è·¯å¾„`
- ä¸æŒ‡å®šé…ç½®æ–‡ä»¶çš„è¯é»˜è®¤ä½¿ç”¨æœ€å¤–å±‚çš„`webpack.config.js`  



##### é…ç½®æ–‡ä»¶çš„â€œå…¥å£â€ä¸â€œå‡ºå£â€   

- å…¥å£ï¼ˆ`entry`é€‰é¡¹ï¼‰  
  èµ·ç‚¹æ˜¯æœ€å¤–å±‚ï¼ˆ`package.json`æ‰€åœ¨æ–‡ä»¶å¤¹ï¼‰  
  
  - å•ä¸ªå…¥å£  
    ç›´æ¥å†™æ™®é€šå­—ç¬¦ä¸²è·¯å¾„å°±è¡Œ
  
  - å¤šä¸ªå…¥å£  
    è¦ç”¨å¦‚ä¸‹å†™æ³•  
  
    ```js
    {
      å…¥å£Açš„åç§°:å…¥å£Açš„è·¯å¾„,
      å…¥å£Bçš„åç§°:å…¥å£Bçš„è·¯å¾„,
    }
    ```
  
    ï¼ˆè¿™é‡Œå…¥å£çš„åç§°æ˜¯è‡ªå®šä¹‰çš„ï¼‰
  
- å‡ºå£ï¼ˆ`output`é€‰é¡¹ï¼‰  
  - `filename`å±æ€§  
    - å•ä¸ªå…¥å£  
      ç›´æ¥å†™åå­—å°±è¡Œ  
    - å¤šä¸ªå…¥å£  
      ç”¨ç±»ä¼¼å¦‚ä¸‹çš„å†™æ³•  
      `'[name].bundle.js'`  
      å…¶ä¸­`[name]`ä¼šè¢«æ›¿æ¢ä¸ºå…¥å£çš„åç§°
  - `path`å±æ€§å†™å‡ºå£æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹  
    å†™æ³•ä¸ºï¼š`path.resolve(__dirname, å­—ç¬¦ä¸²è·¯å¾„)`  
    å­—ç¬¦ä¸²è·¯å¾„çš„èµ·ç‚¹æ˜¯é…ç½®æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹  
    <span style='opacity:.5'>æœªå°è¯•è¿‡ç›´æ¥å†™å­—ç¬¦ä¸²ï¼ˆä¸è¿‡åº”è¯¥ä¹Ÿæ˜¯å¯ä»¥çš„ï¼‰</span>



##### å¤šå…¥å£

æœ‰å‡ ä¸ªå…¥å£å°±ä¼šæ‰“åŒ…å‡ºå‡ ä¸ªjsï¼ˆé»˜è®¤æƒ…å†µæ˜¯è¿™æ ·çš„ï¼‰  
æ¯ä¸ªæ‰“åŒ…æ–‡ä»¶éƒ½æ˜¯ä¾æ®è‡ªå·±çš„å…¥å£çš„tree shakingç»“æœæ¥æ‰“åŒ…çš„ï¼ˆä¸åŒå…¥å£çš„æ‰“åŒ…æ–‡ä»¶é»˜è®¤æ˜¯ä¸ä¼šäº’ç›¸å½±å“çš„ï¼‰  

- [å»é‡](https://v4.webpack.docschina.org/guides/code-splitting/#%E9%98%B2%E6%AD%A2%E9%87%8D%E5%A4%8D-prevent-duplication-)  

  - æ“ä½œæ–¹å¼  
    åœ¨é…ç½®å¯¹è±¡ä¸­åŠ å…¥å¦‚ä¸‹å±æ€§  
    
    ```js
    optimization: {
      splitChunks: {
        chunks: 'all'
      }
    }
    ```
    
  - ç»“æœ  
    æ‰“åŒ…å°±æ›´æ™ºèƒ½äº†ï¼Œæ¯ä¸ªé¡µé¢éƒ½ä¸éœ€è¦å¼•å…¥å¤šä½™çš„ä¾èµ–
  
    - ä¾‹å­  
      å¦‚æœæœ‰2ä¸ªå…¥å£ï¼Œ2ä¸ªå…¥å£å…±ç”¨äº†ä¸€äº›ä¾èµ–ï¼Œè€Œç¬¬ä¸€ä¸ªå…¥å£æ¯”ç¬¬äºŒä¸ªå¤šå¼•ç”¨äº†1ä¸ªä¾èµ–  
      é‚£ä¹ˆç¬¬ä¸€ä¸ªå…¥å£çš„ä¾èµ–ä¼šè¢«å•ç‹¬æ‰“åŒ…æˆ1ä¸ªæ–‡ä»¶ï¼Œå…¶ä½™ä¾èµ–ä¼šè¢«æ‰“æˆå¦ä¸€ä¸ªæ–‡ä»¶  
      æœ€ç»ˆæ‰“åŒ…æ–‡ä»¶å°±ä¼šå¦‚ä¸‹
  
      - `page1.bundle.js`
      - `page2.bundle.js`
      - `vendors~page1.bundle.js`  
        ï¼ˆç¬¬ä¸€ä¸ªå…¥å£æ¯”ç¬¬äºŒä¸ªå…¥å£å¤šçš„ä¾èµ–ï¼‰
      - `vendors~page1~page2.bundle.js`  
        ï¼ˆå…¶ä½™ä¾èµ–ï¼‰
  
      å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šä¸Šé¢2ä¸ª`vendors`å¼€å¤´çš„æ–‡ä»¶ä¹Ÿæ˜¯è¦å¼•åˆ°htmlé‡Œçš„
  
  - å°† CSS ä»ä¸»åº”ç”¨ç¨‹åºä¸­åˆ†ç¦»  
    [mini-css-extract-plugin](https://v4.webpack.js.org/plugins/mini-css-extract-plugin/)



### [loader](https://v4.webpack.docschina.org/concepts/loaders/)



**ä½œç”¨**

æˆ‘ä»¬ç”¨loaderåŸºæœ¬éƒ½æ˜¯ç”¨æ¥è½¬æ¢æ–‡ä»¶çš„  
ï¼ˆæ„æ€å°±æ˜¯æŒ‡å®šä¸€äº›æ–‡ä»¶åœ¨æ‰“åŒ…å‰å…ˆåšä¸€äº›è½¬æ¢ï¼‰



##### åœ¨é…ç½®å¯¹è±¡ä¸­é…ç½®loader  

loaderçš„é…ç½®å­˜åœ¨äº`é…ç½®å¯¹è±¡.module.rules`çš„å­é¡¹ä¸­  
ä¸ªäººæŠŠè¿™ä¸ªå¯¹è±¡ç§°ä¸º[ã€è½¬æ¢è§„åˆ™ã€](https://v4.webpack.docschina.org/configuration/module/#rule)

- ã€è½¬æ¢è§„åˆ™ã€çš„å±æ€§
  - [`test`](https://v4.webpack.docschina.org/configuration/module/#rule-test)  
    å¿…å¡«  
    ç¡®å®šå“ªäº›æ–‡ä»¶éœ€è¦è½¬æ¢  
    å€¼åŸºæœ¬éƒ½æ˜¯æ­£åˆ™  
    - å…·ä½“çš„ç¡®å®šæ–¹å¼ä¸ºï¼š  
      æ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼Œå¦‚æœç»“æœä¸º`true`ï¼Œåˆ™æ‰“åŒ…  
      `testå±æ€§çš„å€¼.test(æ–‡ä»¶å)`  
      ï¼ˆè¿™é‡Œè¯´çš„æ–‡ä»¶åæ˜¯åŒ…å«åç¼€åçš„ï¼‰
  - [`use`](https://v4.webpack.docschina.org/configuration/module/#rule-use)  
    å¿…å¡«  
    æŒ‡å®šç”¨å“ªäº›loaderè¿›è¡Œè½¬æ¢  
    è¿™é‡Œ1ä¸ªloaderå¯¹åº”1ä¸ªUseEntryï¼ˆæœ¬ç¬”è®°ä¸‹æ–¹æœ‰å¯¹UseEntryçš„ä»‹ç»ï¼‰  
    `use`æœ‰2ç§ä¹¦å†™æ–¹å¼
    - ç›´æ¥æŠŠUseEntryä½œä¸ºå€¼  
    - ç”¨1ä¸ªæ•°ç»„ä½œä¸ºå€¼  
      æ•°ç»„çš„å­é¡¹æ˜¯UseEntry  
      loaderåœ¨è¿™é‡Œçš„æ‰§è¡Œé¡ºåºä¸ºï¼šå€’åº
  - [`exclude`](https://v4.webpack.docschina.org/configuration/module/#rule-exclude)  
    ä¸€èˆ¬éƒ½æ˜¯å†™`/node_modules/`  
    åº”è¯¥æ˜¯ç”¨æ¥æ’é™¤æ–‡ä»¶çš„

- [UseEntry](https://v4.webpack.js.org/configuration/module/#useentry)  
  æœ‰3ç§ä¹¦å†™æ–¹å¼

  - å­—ç¬¦ä¸²  
    ç›´æ¥å†™loaderå

  - å¯¹è±¡  
    å¯¹è±¡çš„å±æ€§å¦‚ä¸‹

    - `loader`  
      å¿…å¡«  
      å­—ç¬¦ä¸²çš„UseEntryä¸è¿™ä¸ª`loader`å±æ€§æ˜¯å…¨ç­‰çš„
    - `options`  
      åˆ«åï¼š`query`  
      åˆæ³•çš„å€¼æœ‰ï¼šå­—ç¬¦ä¸²ã€å¯¹è±¡  
      ä¼šä¼ é€’ç»™loader

  - å‡½æ•°  
    è¦æ±‚è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„`options`å±æ€§ä¹Ÿæ˜¯å¿…å¡«çš„  

    > å½¢å‚çš„å±æ€§å¦‚ä¸‹
    >
    > - `compiler`ï¼šå½“å‰çš„webpackç¼–è¯‘å™¨ï¼ˆå¯ä»¥æœªå®šä¹‰ï¼‰
    > - `issuer`ï¼šå¯¼å…¥æ­£åœ¨åŠ è½½çš„æ¨¡å—çš„æ¨¡å—çš„è·¯å¾„
    > - `realResource`ï¼šå§‹ç»ˆæ˜¯è¦åŠ è½½çš„æ¨¡å—çš„è·¯å¾„
    > - `resource`ï¼šè¦åŠ è½½çš„æ¨¡å—çš„è·¯å¾„ï¼Œé€šå¸¸ç­‰äºï¼Œ`realResource`é™¤éé€šè¿‡`!=!`è¯·æ±‚å­—ç¬¦ä¸²ä¸­çš„èµ„æºåç§°è¦†ç›–
    >
    > â€”â€” [å®˜ç½‘](https://v4.webpack.js.org/configuration/module/#useentry)



##### æ‰“åŒ…éjsèµ„æº



###### æ‰“åŒ…css



**æ­¥éª¤å¦‚ä¸‹**

1. `npm install --save-dev style-loader css-loader`

2. åœ¨`é…ç½®å¯¹è±¡.module.rules`æ•°ç»„ä¸­å¢åŠ å¦‚ä¸‹å­é¡¹  

   ```js
   {
     test: /\.css$/,
     use: ['style-loader','css-loader']
   }
   ```



**æ•ˆæœ**

å¦‚æœæŸä¸ªå…¥å£çš„tree shakingé‡Œæœ‰import cssçš„è¯ï¼Œç”¨è¿™ä¸ªå…¥å£æ‰“åŒ…å‡ºçš„jså°±ä¼šåœ¨headæ ‡ç­¾é—´åŠ å…¥styleæ ‡ç­¾ï¼Œstyleæ ‡ç­¾é‡Œå°±æ˜¯cssé‡Œçš„å†…å®¹ï¼Œ1ä¸ªcssæ–‡ä»¶å¯¹åº”1ä¸ªstyleæ ‡ç­¾



**é—®é¢˜æ’æŸ¥**

- çº¢è‰²æŠ¥é”™`TypeError: this.getOptions is not a function`  
  é—®é¢˜åŸå› ï¼šcss-loaderä¸style-loaderç‰ˆæœ¬è¿‡é«˜  
  css-loaderæœ€æ–°æ”¯æŒç‰ˆæœ¬ï¼š4  
  style-loaderæœ€æ–°æ”¯æŒç‰ˆæœ¬ï¼š2



æœ¬ç¬”è®°ä¸‹æ–¹æœ‰è®°å½•'css-loader'ä¸'style-loader'çš„ä½œç”¨



###### æ‰“åŒ…å›¾ç‰‡

- ä½¿ç”¨file-loader  
  æœ¬ç¬”è®°ä¸‹æ–¹æœ‰å¯¹file-loaderè¿›è¡Œè¯¦ç»†è¯´æ˜

- `require`  
  æœªæ·±å…¥ç ”ç©¶  
  å®˜ç½‘å¥½åƒæœ‰æåˆ°`require`ï¼Œä¸è¿‡ä¸çŸ¥é“å’Œä¼ä¸šæ™ºæ…§é©¾é©¶èˆ±é‡Œçš„æ˜¯ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿

  - åœ¨ ä¼ä¸šæ™ºæ…§é©¾é©¶èˆ± ç§»åŠ¨ç«¯é¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨  
    è¯¥é¡¹ç›®ä¸­å¯ä»¥å¼•ç”¨å›¾ç‰‡çš„æ–¹å¼å¦‚ä¸‹ï¼ˆè¿™é‡Œåˆ—çš„ä¸æ˜¯å…¨éƒ¨æ–¹å¼ï¼‰

    - `<img src='ç›¸å¯¹è·¯å¾„' >`
    - `<img src='@åˆ«åè·¯å¾„' >`
    - `<img :src="require('ç›¸å¯¹è·¯å¾„')" >`
    - `<img :src="require('@åˆ«åè·¯å¾„')" >`
    - jsä¸­`require('ç›¸å¯¹è·¯å¾„')`è¿”å›æ‰“åŒ…åå›¾ç‰‡çš„è·¯å¾„
    - jsä¸­`require('@åˆ«åè·¯å¾„')`è¿”å›æ‰“åŒ…åå›¾ç‰‡çš„è·¯å¾„

    ä»¥ä¸Šæ–¹å¼åœ¨ç”Ÿäº§ç¯å¢ƒ/å¼€å‘ç¯å¢ƒéƒ½å¯ä»¥ä½¿ç”¨  
    æµ‹è¯•ä»£ç ä½äºâ€œæµ‹è¯•requireå›¾ç‰‡â€åˆ†æ”¯



##### loaderåˆ—è¡¨

[å®˜ç½‘åˆ—å‡ºçš„loaderåˆ—è¡¨](https://v4.webpack.js.org/loaders/)

- [`css-loader`](https://v4.webpack.js.org/loaders/css-loader/)  
  ä¸»è¦ä½œç”¨ï¼šå…è®¸ä½ æ‰“åŒ…cssæ–‡ä»¶
- [`style-loader`](https://v4.webpack.js.org/loaders/style-loader/)  
  ä¸»è¦ä½œç”¨ï¼šåœ¨htmlé‡Œå¢åŠ `style`æ ‡ç­¾  
  CSS Modulesï¼šå®˜ç½‘é‡Œæåˆ°å¯ä»¥ç”¨ï¼Œä½†æ˜¯è¯•äº†ä¸å¥½ä½¿ï¼Œå¼•å…¥çš„cssæœ€ç»ˆåªä¼šå˜æˆç©ºå¯¹è±¡

- [`file-loader`](https://v4.webpack.js.org/loaders/file-loader/)  

  - åŠŸèƒ½  
    æ‰“åŒ…æœ‰ä½¿ç”¨çš„èµ„æºï¼Œå¹¶ä¸”æŠŠèµ„æºåç§°é‡å‘½åä¸ºéšæœºå­—ç¬¦ä¸²  
  - ä½¿ä½ å…è®¸åšå¦‚ä¸‹æ“ä½œ
    - èƒ½åœ¨æ‰“åŒ…çš„æ ·å¼æ–‡ä»¶ä¸­å¼•ç”¨èµ„æº  
      æ¯”å¦‚ï¼š`.a{background: url(å›¾ç‰‡åœ°å€);}`
    - èƒ½åœ¨jsé‡Œå¼•ç”¨èµ„æº  
      æ¯”å¦‚ï¼š`import A from 'èµ„æºåœ°å€'`  
      è¿™ä¸ªAåœ¨æ‰“åŒ…åå°±ä¼šæŒ‡å‘æ‰“åŒ…åçš„èµ„æºåœ°å€

  - é…ç½®æ–¹å¼  
    åœ¨`é…ç½®å¯¹è±¡.module.rules`æ•°ç»„ä¸­å¢åŠ å¦‚ä¸‹å­é¡¹  

    ```js
    {
      test: /\.(png|jpe?g|gif)$/i,
      use: [
        {
          loader: 'file-loader',
        },
      ],
    },
    ```
    
    

- [`url-loader`](https://v4.webpack.js.org/loaders/url-loader/)  
  åƒ file loaderä¸€æ ·å·¥ä½œ, ä½†æ˜¯åœ¨æ–‡ä»¶å°äºæŒ‡å®šå¤§å°æ—¶ä¼šè¿”å› [data URL](https://tools.ietf.org/html/rfc2397) ã€‚ï¼ˆbase64å°±æ˜¯data URLï¼‰  
  ä¼¼ä¹å¯ä»¥æŠŠå¤šå¼ å°å›¾æ ‡åˆæˆä¸€å¼ é›ªç¢§å›¾





##### [ä½¿ç”¨TypeScript](https://v4.webpack.docschina.org/guides/typescript/#%E4%BD%BF%E7%94%A8-third-party-library)

æ­¥éª¤ï¼š

1. `npm install --save-dev typescript ts-loader`

2. åŠ å…¥`tsconfig.json`å¹¶å†™å¦‚ä¸‹å†…å®¹  

   ```json
   {
     "compilerOptions": {
       "outDir": "./dist/",
       "noImplicitAny": true,
       "module": "es6",
       "target": "es5",
       "jsx": "react",
       "allowJs": true
     }
   }
   ```

3. webpackçš„é…ç½®å¯¹è±¡ä¸­åŠ å…¥`resolve`é…ç½®é¡¹ï¼Œå€¼å¦‚ä¸‹  

   ```json
   {
     extensions: [ '.tsx', '.ts', '.js' ]
   }
   ```

4. webpackçš„`module`é…ç½®é¡¹ä¸­åŠ å…¥`rules`é”®ï¼Œå€¼å¦‚ä¸‹  

   ```json
   [
     {
       test: /\.tsx?$/,
       use: 'ts-loader',
       exclude: /node_modules/
     }
   ]
   ```

5. å®Œæˆã€‚åç»­æ‰“åŒ…æ—¶å°±å¯ä»¥ç¼–è¯‘tsäº†

ï¼ˆå…³äºåœ¨tsä¸­ä½¿ç”¨jsçš„è¯´æ˜è¯·åˆ°tsçš„ç¬”è®°é‡ŒæŸ¥çœ‹ï¼‰  
ï¼ˆå…³äºåœ¨tsä¸­ä½¿ç”¨source mapçš„æ–¹æ³•è¯·åˆ°tsçš„ç¬”è®°é‡ŒæŸ¥çœ‹ï¼‰



##### å…¶ä»–

- [ä¸ºå•ä¸ªæ–‡ä»¶æŒ‡å®šloader](https://v4.webpack.docschina.org/concepts/loaders/#%E5%86%85%E8%81%94-inline-)

- å­¦ä¹ ç¼–å†™loader  
  å­¦ä¹ ä¹‹å‰å…ˆçœ‹çœ‹[loaderç‰¹æ€§](https://v4.webpack.docschina.org/concepts/loaders/#loader-%E7%89%B9%E6%80%A7)
  
  > ä½ å¯ä»¥ä½¿ç”¨ Node.js æ¥å¾ˆç®€å•åœ°ç¼–å†™è‡ªå·±çš„ loader â€”â€” [å®˜ç½‘ï¼ˆå°è®°ä¸­æ–‡ç¿»è¯‘ï¼‰](https://v4.webpack.docschina.org/loaders/)



### æ’ä»¶  

è¿™æ˜¯[å®˜ç½‘çš„æ’ä»¶åˆ—è¡¨](https://v4.webpack.js.org/plugins/)  
æœ‰ç”¨çš„æ’ä»¶åº”è¯¥å°±åªæœ‰htmlWebpackPluginå’Œä¸€ä¸ªæ‹·è´èµ„æºçš„æ’ä»¶ï¼Œå…¶ä»–åŸºæœ¬éƒ½æ˜¯å‹ç¼©ã€[åœ¨æ‰“åŒ…æ–‡ä»¶å¤´éƒ¨åŠ ä¸œè¥¿](https://v4.webpack.js.org/plugins/banner-plugin/)çš„æ’ä»¶  

- [æ‹·è´èµ„æº](https://webpack.js.org/plugins/copy-webpack-plugin/)  
  è®©æºç ç›®å½•é‡Œçš„å†…å®¹åœ¨ç»è¿‡webpackåä»ç„¶ä¸å˜
  
  - æ‹·è´ç›®å½•çš„åŒæ—¶æŒ‰ç…§è·¯å¾„æ‹’ç»æ‹·è´ä¸€äº›å†…å®¹  
    ç”¨`globOptions`æäº†ä¸€ä¼šï¼ŒæœªæˆåŠŸï¼Œå°è¯•çš„ä»£ç å¦‚ä¸‹ï¼š  
    
    ```js
    plugins: [
      new CopyWebpackPlugin([
        {
          from: 'src/static/**/*',
          to: 'static/!**!/!*',
          globOptions: {
            dot: true,
            gitignore: true,
            ignore: ['**/è®¾è®¡å›¾/!**'],
          },
        },
      ])
    ]
    ```
    
    å®˜æ–¹çš„ç¤ºä¾‹æ˜¯ï¼š  
    
    ```js
    new CopyPlugin({
      patterns: [
        {
          xxx
          globOptions: xxx,
        },
      ],
    })
    ```
    
    ä¸è¿‡è¿™æ ·å†™çš„è¯æ— æ³•æ‰“åŒ…å¹¶ä¸”æŠ¥é”™ï¼š`patternsè¦æ˜¯ä¸€ä¸ªæ•°ç»„`
  
- ä¿®æ”¹html  
  æ’ä»¶åå«ï¼š[htmlWebpackPlugin](https://github.com/jantimon/html-webpack-plugin)  
  
  - demo  
    
    - webpacké…ç½®  
    
        ```js
        var HtmlWebpackPlugin = require('html-webpack-plugin');
        
        çœç•¥ä¸€äº›å†…å®¹
        plugins: [
          new HtmlWebpackPlugin({
            title:'aa',
            templateParameters: function () { /* omitted long function */ },
            template: 'D:\\work\\project\\ç¬¬ä¸€ä¸ªå¤§å±\\code\\first_vue_ui\\public\\index.html'
          })
        ]
        çœç•¥ä¸€äº›å†…å®¹
      ```
    
      å…¶ä¸­`title`ç­‰é…ç½®çœ‹[å®˜æ–¹github](https://github.com/jantimon/html-webpack-plugin#options)
    
    - htmlå†™çš„å†…å®¹  
      `<%= htmlWebpackPlugin.options.title %>`è¿™æ ·å†™å°±èƒ½å–åˆ°`title`äº†
    
  - åœ¨htmlé‡Œæ’å…¥å†…å®¹  
  
    - `<%= è¦æ’å…¥çš„å†…å®¹ %>`  
      è¿™ä¸ªå†…å®¹ç›´æ¥å†™jsä¹Ÿå¯ä»¥  
      ä¸è¿‡è¦æ³¨æ„ä¸€ä¸ªæ ‡ç­¾é‡Œä¸è¦å†™2ä¸ª`<%= è¦æ’å…¥çš„å†…å®¹ %>`ï¼ˆè¦æ³¨æ„titleæ ‡ç­¾é‡Œæ˜¯ä¸èƒ½æ³¨é‡Šçš„ï¼‰
    - titleæ ‡ç­¾é‡Œè¦ç”¨`<%= è¦æ’å…¥çš„å†…å®¹ %>`æ‰ä¼šç”Ÿæ•ˆ  
      ä¸è¿‡metaé€‰é¡¹çš„å±æ€§è‡ªåŠ¨ä¼šåŠ åˆ°htmlé‡Œï¼ˆä¸éœ€è¦ä½ å†åœ¨htmlä¸ŠåŠ ä»€ä¹ˆä¸œè¥¿ï¼‰



### ã€å‹ç¼©ã€ä¸`mode`

ï¼ˆä»¥ä¸‹å†…å®¹æ¥æºäºå®æ“ä¸é˜…è¯»[å®˜æ–¹é¡µé¢](https://v4.webpack.docschina.org/concepts/mode)åçš„æ€è€ƒï¼‰  

- å‹ç¼©  
  åº”è¯¥æ˜¯`optimization`é…ç½®é¡¹çš„`minimize`å±æ€§æ§åˆ¶æ˜¯å¦å‹ç¼©  
  ï¼ˆä¸º`true`åˆ™å‹ç¼©ï¼Œ`fasle`ä¸å‹ç¼©ï¼‰  
  ï¼ˆä¸è¿‡ç”±äºè®¾ç½®`mode`å°±å¯ä»¥æ§åˆ¶æ˜¯å¦å‹ç¼©çš„è¡Œä¸ºäº†ï¼Œæ‰€ä»¥å¹³æ—¶å¯èƒ½ä¸éœ€è¦ç¢°åˆ°`minimize`å±æ€§ï¼‰
- `mode`  
  é»˜è®¤å€¼ä¸ºç”Ÿäº§ç¯å¢ƒ
  - ä½œç”¨  
    åº”è¯¥å°±2ç‚¹ï¼š
    - ä½¿ç”¨ä¸åŒçš„plugin
    - ç»™é…ç½®é¡¹è®¾ç½®ä¸åŒçš„é»˜è®¤å€¼  
      é»˜è®¤å€¼åº”è¯¥å°±æ˜¯[è¿™ä¸ªå®˜æ–¹é¡µé¢](https://v4.webpack.docschina.org/concepts/mode)é‡Œçš„çº¢è‰²éƒ¨åˆ†
  - ä½¿ç”¨  
    æœ‰å¦‚ä¸‹2ç§ä½¿ç”¨æ–¹å¼
    - ä½œä¸ºé…ç½®å¯¹è±¡çš„é…ç½®é¡¹ä½¿ç”¨
    - åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨  
      ä¾‹å¦‚ï¼š` webpack --mode æ¨¡å¼å`



### [source map](https://webpack.docschina.org/configuration/devtool)  

ï¼ˆâ†‘â†‘â†‘æ›´å¤šå†…å®¹çœ‹é“¾æ¥ï¼‰

- `devtool`é…ç½®é¡¹æœ‰å¾ˆå¤šå€¼å¯ä»¥é€‰ï¼Œæœ‰çš„å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Œæœ‰çš„ä¸è¡Œ  
  - webpack4æœ‰ä¸€ç‚¹ä¼šè®©ç”¨æˆ·äº§ç”Ÿå›°æ‰°ï¼š  
    **`devtool`é…ç½®é¡¹åœ¨ç”Ÿäº§ç¯å¢ƒä¸å¯ç”¨çš„å€¼ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¹Ÿä¼šäº§ç”Ÿæ•ˆæœ**ï¼ˆ???è¿™å¥è¯çš„æ„æ€æ˜¯â€œå®˜ç½‘æ˜¾ç¤ºä¸å¯ç”¨ä½†æ˜¯å®é™…å¯ç”¨â€å—ï¼‰  
    ï¼ˆå› æ­¤åœ¨ç”Ÿäº§ç¯å¢ƒä¸æƒ³ç”¨source mapçš„è¯éœ€è¦æŠŠè¿™ä¸ªé…ç½®é¡¹æ³¨é‡Šæ‰ï¼‰
- é»˜è®¤å€¼  
  å½“å‰æœªæ‰¾åˆ°é»˜è®¤å€¼çš„ç¡®åˆ‡èµ„æ–™  
  æ€»ä¹‹ä¸å†™çš„è¯å°±ç®—æ˜¯modeè®¾ä¸ºdevelopmentï¼Œsource mapä¹Ÿä¸å’‹æ ·
- ç›®å‰æ²¡æ„è¯†åˆ°`'eval-source-map'`å’Œ`'inline-source-map'`çš„åŒºåˆ«



### çƒ­æ›´æ–°

æœ‰ä»¥ä¸‹å‡ ç§å®ç°æ–¹å¼

- [watch mode(è§‚å¯Ÿæ¨¡å¼) ](https://v4.webpack.docschina.org/guides/development/#%E4%BD%BF%E7%94%A8-watch-mode-%E8%A7%82%E5%AF%9F%E6%A8%A1%E5%BC%8F-)  
  åœ¨æ”¹åŠ¨ä»£ç åä¼šè‡ªåŠ¨æ‰“åŒ…
- [webpack-dev-server](https://v4.webpack.docschina.org/guides/development/#%E4%BD%BF%E7%94%A8-webpack-dev-server)<span style='opacity:.5'>ï¼ˆğŸ‘ˆé“¾æ¥é‡Œå†™çš„è¯­æ³•æ˜¯webpack-dev-server3çš„ï¼‰</span>  
  ä¼šèµ·å¥½httpæœåŠ¡ç”¨äºæµ‹è¯•ï¼Œå®æ—¶æ›´æ–°ï¼Œå¹¶ä¸”é»˜è®¤ä¸ç”Ÿæˆæ–‡ä»¶  
  è·Ÿå¤šå†…å®¹å»æœ¬ç¬”è®°çš„â€œwebpack-dev-server4â€é‡ŒæŸ¥çœ‹
- [webpack-dev-middleware](https://v4.webpack.docschina.org/guides/development/#%E4%BD%BF%E7%94%A8-webpack-dev-middleware)  
  å¯ä»¥å®æ—¶æ›´æ–°åˆ°æœåŠ¡å™¨ï¼ˆæ¯”å¦‚expressï¼‰





### æŒ‡å®šä¸æ‰“åŒ…ä¸€äº›å¯¼å…¥å†…å®¹  

ï¼ˆ[è¿™ä¸ªå®˜æ–¹é¡µé¢ï¼ˆå°è®°ä¸­æ–‡ç¿»è¯‘ï¼‰](https://v4.webpack.docschina.org/guides/author-libraries/#%E5%A4%96%E9%83%A8%E5%8C%96-lodash-externalize-lodash-)æœ‰ä¸€äº›ç›¸å…³è¯´æ˜ï¼‰  
åœ¨`webpack.config.js`ä¸­å¢åŠ `externals`ï¼Œå¦‚ä¸‹ï¼š

```javascript // webpack.config.js
externals:{
  '@turf/turf':'turf', 
},
```

è¿™æ ·å°±ä¸ä¼šæ‰“åŒ…`'@turf/turf'`  
å¹¶ä¸”åœ¨å¼•ç”¨`'@turf/turf'`åŒ…æ—¶ä¼šå»å»å…¨å±€å˜é‡`turf`é‡Œå¯»æ‰¾è¿™ä¸ªåŒ…  

- é”®åçš„æ„ä¹‰  
  ä½ çš„é¡¹ç›®ï¼ˆåº“ï¼‰ä¸­å¯¼å…¥çš„åç§°  
  ï¼ˆæ¯”å¦‚`import * as turf from '@turf/turf'`çš„`'@turf/turf'`ï¼‰
- é”®å€¼çš„æ„ä¹‰  
  ä½ çš„é¡¹ç›®ï¼ˆåº“ï¼‰ä½¿ç”¨ç¯å¢ƒæ‰€ç”¨åŒ…çš„åç§°  





### æ‰“åŒ…ä¸ºlibrary

æ‰“åŒ…ä¸ºlibraryçš„å®è·µç»éªŒ

`webpack.config.js`ä¸­çš„`output`å±æ€§å¦‚ä¸‹  

```javascript // webpack.config.js
output: {
  filename: 'eleSym.beta.js', // æ‰“åŒ…åçš„æ–‡ä»¶å
  library: 'eleSym', // æŒ‡å®šç±»åº“åã€‚ä¼¼ä¹åªåœ¨ç”¨scriptæ ‡ç­¾å¼•å…¥æ—¶æœ‰ç”¨ï¼ˆåœ¨æ‰“åŒ…æ–‡ä»¶æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•åä¼šç»™`window[è¯¥å±æ€§çš„å€¼]`èµ‹å€¼ï¼‰ï¼ˆè¯¥å±æ€§æ˜¯å¯ä»¥çœç•¥çš„ï¼Œçœç•¥åå°±ä¸ä¼šå¢åŠ å…¨å±€å˜é‡ï¼‰
  libraryExport: "default", // è®©`export default`çš„å†…å®¹æˆä¸ºå‡ºå£ã€‚å¦‚æœä¸åŠ è¿™è¡Œçš„è¯ï¼Œæ‰€æœ‰`export`çš„å†…å®¹éƒ½ä¼šä½œä¸ºå‡ºå£çš„å±æ€§ï¼Œ`export default`çš„ä¼šä½œä¸º`default`å±æ€§
  libraryTarget: 'umd', // å®šä¹‰æ‰“åŒ…æ–¹å¼ä¸ºumdï¼Œå…¶ä»–é€‰é¡¹æœ‰varç­‰ï¼Œvaræ˜¯é»˜è®¤å€¼ï¼Œå°±æ˜¯æ‰“åŒ…ä¸ºå…¨å±€å˜é‡
  auxiliaryComment: { // ç»™æ‰“åŒ…åçš„æ–‡ä»¶é’ˆå¯¹æ¨¡å—åŒ–çš„è¯­å¥åŠ ä¸Šç›¸åº”æ³¨é‡Š
    root: 'Root Comment',
    commonjs: 'CommonJS Comment',
    commonjs2: 'CommonJS2 Comment',
    amd: 'AMD Commentï¼šAMDç›¸å…³ä»£ç éœ€è¦æ³¨é‡Šæ‰'
  },
  path: path.resolve(__dirname, 'dist'),
},
```

- æ‰“åŒ…æ–¹å¼ï¼ˆ`libraryTarget`ï¼‰
  - umd  
    - æ— æ³•ä¸`almond.js`æˆ–`require.js`ä¸€èµ·ä½¿ç”¨  
      è§£å†³æ–¹å¼ï¼šæŠŠæ‰“åŒ…åæ–‡ä»¶çš„amdç›¸å…³ä»£ç å»æ‰
  - æ‰“åŒ…ä¸ºå¯¹è±¡çš„å±æ€§  
    `"this"`ã€`"window"`ã€`"global"`å’Œ`"var"`æ²¡å‘ç°åŒºåˆ«  
    `"commonjs"`ä½œç”¨ä¸æ˜
  - å¯ç”¨æ¨¡å—åŒ–æ–¹å¼å¼•å…¥çš„æ‰“åŒ…æ–¹å¼ï¼ˆ`libraryTarget`ï¼‰  
    - `'umd'`æ–¹å¼å¯ä»¥  
      ä¸è¿‡ä¼¼ä¹åœ¨htmlä¸­ç”¨importæ— æ³•å¯¼å…¥  




### æ‰“åŒ…æ—¶æ‰§è¡Œnode  

æˆ‘ä»¬å¯ä»¥ç¼–å†™nodeä»£ç ï¼Œè®©webpackåœ¨æ‰“åŒ…æ—¶æ‰§è¡Œ  
ï¼ˆåœ¨webstormè°ƒè¯•æ¨¡å¼ä¸‹å¯ä»¥æ‰“å°ä½†æ˜¯æ‰“æ–­ç‚¹è¿™ä¸ªæ“ä½œè¿˜æ²¡æˆåŠŸè¿‡ï¼‰  
çœ‹[è¿™ä¸ªé¡µé¢](https://v4.webpack.docschina.org/configuration/configuration-types)è·å¾—å®˜æ–¹è¯´æ˜  
æœ¬ç¬”è®°åˆ—å‡ºéƒ¨åˆ†ç¼–ç¨‹èƒ½åŠ›ï¼š

- é…ç½®æ–‡ä»¶æœ¬èº«å°±æ˜¯nodeç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤é‡Œé¢å¯ä»¥å†™nodeä»£ç 

- é…ç½®æ–‡ä»¶å¯ä»¥å¯¼å‡ºå¤šä¸ªé…ç½®å¯¹è±¡  
  æ¯ä¸ªé…ç½®å¯¹è±¡éƒ½ä¼šæ‰“åŒ…ä¸€æ¬¡  
  ç¤ºä¾‹ä»£ç å¦‚ï¼š`module.exports = [é…ç½®å¯¹è±¡A,é…ç½®å¯¹è±¡B]`

- å‘½ä»¤è¡Œä¼ å‚  

  - æ“ä½œæ­¥éª¤

    1. é…ç½®æ–‡ä»¶å¯¼å‡ºå‡½æ•°  
    2. åœ¨å‘½ä»¤è¡Œä¸Šä¼ å…¥å®å‚  

  æŸ¥çœ‹è¿™ä¸¤ä¸ªé¡µé¢äº†è§£è¯¦ç»†ä¿¡æ¯ï¼š[ä¸Šé¢å·²ç»ç»™å‡ºè¿‡çš„ä¸€ä¸ªé¡µé¢](https://v4.webpack.docschina.org/configuration/configuration-types#%E5%AF%BC%E5%87%BA%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0)ã€[ä¼ å‚api](https://v4.webpack.docschina.org/api/cli#%E7%8E%AF%E5%A2%83%E9%80%89%E9%A1%B9)



### å…¶ä»–

- è½¬æ¢jsç‰ˆæœ¬  
  è¯·æŸ¥çœ‹æœ¬ç¬”è®°çš„babelå’ŒBublÃ©éƒ¨åˆ†
- [ä¸€ä¸ªå®˜æ–¹æœ‰è¯´åˆ°æ¨¡å—çš„é¡µé¢](https://webpack.docschina.org/concepts/modules/)
- [ä¸çŸ¥é“æ¥æºï¼Œä½†æ˜¯æœ‰è¯´webpackå’Œamdå…³ç³»çš„é¡µé¢](http://shouce.jb51.net/webpack/amd.html)
- ç”¨webpackæ‰“å¼€æµè§ˆå™¨çš„è¯ï¼Œä»»ä½•é¡µé¢åœ¨åŠ è½½å®Œæˆåéƒ½ä¼šæ‰“å¼€è°ƒè¯•çª—å£  
  [è¿™ä¸ªçŸ¥ä¹å›ç­”](https://www.zhihu.com/question/352047297/answer/1676952052)æåˆ°äº†è¿™ä¸€ç‚¹



##### éé‡ç‚¹å†…å®¹

- **æ—©æœŸå…¥æ‰‹ç»éªŒ**  
  å› ä¸ºæ˜¯18å¹´ä¸‹åŠå¹´æ­£å¼å‘å¸ƒçš„ï¼Œç›®å‰ç½‘ä¸Šèµ„æ–™éƒ½æœ‰ä¸å‡†ç¡®çš„åœ°æ–¹ã€‚  
  å…¶ä¸­ä¸€å®šè¦åŒæ—¶å…¨å±€å®‰è£…webpackã€webpack-cliã€webpack-dev-serveræ‰èƒ½ä½¿ç”¨ï¼Œå°±åƒè¿™æ ·`npm install webpack webpack-cli webpack-dev-server -g`  
  å‹ç¼©çš„è¯ï¼Œuglifyjsçš„è¯è¦å±€éƒ¨å®‰è£…åå†é…ç½®ä¸€ä¸‹æ‰èƒ½ä½¿ç”¨ã€‚å‹ç¼©åå¸¸å¸¸å‡ºç°æ¯”åŸæ–‡ä»¶å¤§çš„æƒ…å†µï¼Œè€Œä¸”å¹¶ä¸èƒ½å‹ç¼©æ‰€æœ‰æ–‡ä»¶ï¼ˆæ¯”å¦‚pdf.jsåŠpdf.worker.jsï¼‰



# [webpack-dev-server4](https://webpack.docschina.org/configuration/dev-server/)

<span style='opacity:.5'>ï¼ˆğŸ‘†è¿™ä¸ªé“¾æ¥æ˜¯å¯¹çš„ï¼Œå°±æ˜¯å†…åµŒåœ¨webpack5çš„æ–‡æ¡£é‡Œï¼‰</span>

[æœ€ç®€demo](https://webpack.docschina.org/guides/development/#using-webpack-dev-server)



- > webpack-dev-server4æ—¢å¯ç”¨äºwebpack4ä¹Ÿå¯ç”¨äºwebpack5 â€”â€” [è¿ç§»æŒ‡å—](https://github.com/webpack/webpack-dev-server/blob/master/migration-v4.md#-breaking-changes)

- é»˜è®¤ä¸ç”Ÿæˆå®ä½“æ–‡ä»¶  
  è™šæ‹Ÿæ–‡ä»¶çš„è™šæ‹Ÿç›®å½•ç”±`static`é€‰é¡¹æŒ‡å®š
- æŒ‡å®šæ”¾ç½®åˆ°httpæœåŠ¡å™¨ä¸Šçš„ç›®å½•  
  ç”¨`static`é€‰é¡¹æŒ‡å®š





# gulp

ç¯å¢ƒå˜é‡  
ï¼ˆä»¥shuinanProjectThirdBigScreenä¸ºä¾‹ï¼‰

- é…ç½®  
  - é…ç½®å„é¡¹å€¼  
    2ä¸ªé€‰æ‹©ï¼š_config.jsæˆ–project.config.jsé‡Œé…ç½®ï¼ˆproject.config.jsæ²¡æµ‹è¿‡ï¼‰
  - é…ç½®process.env.NODE_ENV  
    gulpfile.jsé‡Œ`gulp.task(xxx,xxxx`  
    ï¼ˆæ²¡æµ‹è¿‡ï¼‰
- ä½¿ç”¨  
  é…ç½®æ—¶ç”¨_config.jsæˆ–project.config.jsä¼šå¯¼è‡´ä½¿ç”¨æ–¹å¼ä¹Ÿä¸åŒ
  - `_config.js`  
    å¼•å…¥`_config.js`ï¼Œç„¶åç›´æ¥ä½¿ç”¨
  - project.config.js  
    å¼•å…¥project.config.jsï¼Œç„¶åä¾æ®process.env.NODE_ENVï¼ˆå…¨å±€çš„ï¼‰æ‰¾åˆ°æƒ³è¦çš„é…ç½®





# é—®é¢˜æ’æŸ¥

- webpackåŠ lessåæ— æ³•ç¼–è¯‘  
  è§£å†³åŠæ³•ï¼š[å®‰è£…ç¬¬äº”ç‰ˆçš„less-loader](https://blog.csdn.net/qq_42430948/article/details/113552673)  
  é—®é¢˜èƒŒæ™¯ï¼š

  - å·²ç”¨vue cliçš„`vue ui`å‘½ä»¤å®‰è£…è¿‡lessã€less-loaderã€style-loaderçš„æœ€æ–°ç‰ˆï¼ˆ4ã€8ã€2ï¼‰

  - å·²åœ¨`main.js`æ·»åŠ å¦‚ä¸‹ä»£ç   

    ```js
    import less from 'less'
    Vue.use(less)
    Vue.config.productionTip = false
    ```

    

